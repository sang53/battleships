(()=>{"use strict";var n={208:(n,e,t)=>{t.d(e,{A:()=>a});var r=t(354),o=t.n(r),i=t(314),s=t.n(i)()(o());s.push([n.id,'*,\n::before,\n::after {\n  box-sizing: border-box;\n}\n\n* {\n  margin: 0;\n}\n\nbody {\n  line-height: 1.15;\n  -webkit-font-smoothing: antialiased;\n  font-family: system-ui, "Segoe UI", Roboto, Arial;\n}\n\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\nsvg {\n  vertical-align: baseline;\n}\n\ninput,\nbutton,\ntextarea,\nselect,\noptgroup {\n  font: inherit;\n  font-size: 100%;\n  line-height: 1.15;\n}\n\np,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  overflow-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  text-wrap: balance;\n}\n\n:root {\n  --bgc-0: black;\n  --bgc-1: grey;\n  --bgc-2: lightgrey;\n\n  --borderc-0: black;\n  --borderc-ship: white;\n\n  --square-normal: lightblue;\n  --square-miss: darkgrey;\n  --square-hit: red;\n  --square-select: yellow;\n\n  --ship-square: grey;\n  --ship-hit: crimson;\n}\n\n.hidden.ship,\n.hidden.board {\n  display: none;\n}\n\n.flex-column {\n  display: flex;\n  flex-direction: column;\n}\n\ndialog {\n  padding: 2rem;\n  max-width: 400px;\n  margin: auto;\n  font-size: 1.25rem;\n\n  > div,\n  form {\n    align-items: center;\n    gap: 2rem;\n  }\n}\n\nfieldset {\n  align-items: center;\n  gap: 0.5rem;\n\n  legend {\n    font-weight: 600;\n    margin-inline: auto;\n  }\n\n  > div {\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n  }\n}\n\n::backdrop {\n  background-color: var(--bgc-0);\n  opacity: 1;\n}\n\n#main {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  padding-top: 2rem;\n}\n\n#main.start-screen {\n  > h1 {\n    font-size: 3rem;\n  }\n\n  > #boards {\n    width: 100vw;\n    display: flex;\n    align-items: center;\n    justify-content: space-evenly;\n\n    > #start-button {\n      height: 3rem;\n      width: 8rem;\n      font-size: 1.5rem;\n    }\n  }\n\n  > #footer {\n    display: flex;\n    gap: 2rem;\n    align-items: center;\n\n    > #settings {\n      display: flex;\n      justify-content: center;\n      font-size: 1.25rem;\n    }\n\n    > button {\n      padding: 1rem;\n    }\n  }\n}\n\n#main.ship-select {\n  button {\n    padding: 1rem;\n  }\n}\n\n#main.shot-select {\n  #boards {\n    display: flex;\n    gap: 2rem;\n    align-items: center;\n\n    #control-container {\n      border: 1px solid black;\n      padding: 1rem;\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n  }\n\n  .box {\n    display: flex;\n    gap: 1rem;\n    padding: 1rem;\n    border: 1px solid black;\n\n    > .box {\n      flex-direction: column;\n    }\n  }\n}\n\n.board {\n  display: grid;\n  grid-template-columns: repeat(10, 50px);\n}\n\n.square {\n  height: 50px;\n  background-color: var(--square-normal);\n  border: 1px solid var(--borderc-0);\n  position: relative;\n\n  &.shot {\n    background-color: var(--square-miss);\n  }\n\n  &.hit {\n    background-color: var(--square-hit);\n  }\n\n  &.selected {\n    background-color: var(--square-select);\n  }\n}\n\n.ship-container {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 1rem;\n  gap: 2rem;\n  border: 1px solid var(--borderc-0);\n  align-items: center;\n  max-width: 500px;\n}\n\n.ship {\n  display: flex;\n  z-index: 1;\n\n  > .square {\n    width: 50px;\n    height: 50px;\n    background-color: var(--ship-square);\n    border: none;\n\n    &.hit {\n      background-color: var(--ship-hit);\n    }\n  }\n\n  &.placed {\n    position: absolute;\n    left: -1px;\n    top: -1px;\n  }\n\n  &.rotated {\n    flex-direction: column;\n  }\n\n  &.selected {\n    transform: scale(1.1);\n  }\n}\n',"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;;;EAGE,sBAAsB;AACxB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,iBAAiB;EACjB,mCAAmC;EACnC,iDAAiD;AACnD;;AAEA;;;;;EAKE,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;;;;;EAKE,aAAa;EACb,eAAe;EACf,iBAAiB;AACnB;;AAEA;;;;;;;EAOE,yBAAyB;AAC3B;;AAEA;EACE,iBAAiB;AACnB;;AAEA;;;;;;EAME,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,aAAa;EACb,kBAAkB;;EAElB,kBAAkB;EAClB,qBAAqB;;EAErB,0BAA0B;EAC1B,uBAAuB;EACvB,iBAAiB;EACjB,uBAAuB;;EAEvB,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;;EAEE,aAAa;AACf;;AAEA;EACE,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,YAAY;EACZ,kBAAkB;;EAElB;;IAEE,mBAAmB;IACnB,SAAS;EACX;AACF;;AAEA;EACE,mBAAmB;EACnB,WAAW;;EAEX;IACE,gBAAgB;IAChB,mBAAmB;EACrB;;EAEA;IACE,aAAa;IACb,mBAAmB;IACnB,YAAY;EACd;AACF;;AAEA;EACE,8BAA8B;EAC9B,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,SAAS;EACT,iBAAiB;AACnB;;AAEA;EACE;IACE,eAAe;EACjB;;EAEA;IACE,YAAY;IACZ,aAAa;IACb,mBAAmB;IACnB,6BAA6B;;IAE7B;MACE,YAAY;MACZ,WAAW;MACX,iBAAiB;IACnB;EACF;;EAEA;IACE,aAAa;IACb,SAAS;IACT,mBAAmB;;IAEnB;MACE,aAAa;MACb,uBAAuB;MACvB,kBAAkB;IACpB;;IAEA;MACE,aAAa;IACf;EACF;AACF;;AAEA;EACE;IACE,aAAa;EACf;AACF;;AAEA;EACE;IACE,aAAa;IACb,SAAS;IACT,mBAAmB;;IAEnB;MACE,uBAAuB;MACvB,aAAa;MACb,aAAa;MACb,sBAAsB;MACtB,WAAW;IACb;EACF;;EAEA;IACE,aAAa;IACb,SAAS;IACT,aAAa;IACb,uBAAuB;;IAEvB;MACE,sBAAsB;IACxB;EACF;AACF;;AAEA;EACE,aAAa;EACb,uCAAuC;AACzC;;AAEA;EACE,YAAY;EACZ,sCAAsC;EACtC,kCAAkC;EAClC,kBAAkB;;EAElB;IACE,oCAAoC;EACtC;;EAEA;IACE,mCAAmC;EACrC;;EAEA;IACE,sCAAsC;EACxC;AACF;;AAEA;EACE,aAAa;EACb,eAAe;EACf,aAAa;EACb,SAAS;EACT,kCAAkC;EAClC,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,UAAU;;EAEV;IACE,WAAW;IACX,YAAY;IACZ,oCAAoC;IACpC,YAAY;;IAEZ;MACE,iCAAiC;IACnC;EACF;;EAEA;IACE,kBAAkB;IAClB,UAAU;IACV,SAAS;EACX;;EAEA;IACE,sBAAsB;EACxB;;EAEA;IACE,qBAAqB;EACvB;AACF",sourcesContent:['*,\n::before,\n::after {\n  box-sizing: border-box;\n}\n\n* {\n  margin: 0;\n}\n\nbody {\n  line-height: 1.15;\n  -webkit-font-smoothing: antialiased;\n  font-family: system-ui, "Segoe UI", Roboto, Arial;\n}\n\nimg,\npicture,\nvideo,\ncanvas,\nsvg {\n  display: block;\n  max-width: 100%;\n}\n\nsvg {\n  vertical-align: baseline;\n}\n\ninput,\nbutton,\ntextarea,\nselect,\noptgroup {\n  font: inherit;\n  font-size: 100%;\n  line-height: 1.15;\n}\n\np,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  overflow-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  text-wrap: balance;\n}\n\n:root {\n  --bgc-0: black;\n  --bgc-1: grey;\n  --bgc-2: lightgrey;\n\n  --borderc-0: black;\n  --borderc-ship: white;\n\n  --square-normal: lightblue;\n  --square-miss: darkgrey;\n  --square-hit: red;\n  --square-select: yellow;\n\n  --ship-square: grey;\n  --ship-hit: crimson;\n}\n\n.hidden.ship,\n.hidden.board {\n  display: none;\n}\n\n.flex-column {\n  display: flex;\n  flex-direction: column;\n}\n\ndialog {\n  padding: 2rem;\n  max-width: 400px;\n  margin: auto;\n  font-size: 1.25rem;\n\n  > div,\n  form {\n    align-items: center;\n    gap: 2rem;\n  }\n}\n\nfieldset {\n  align-items: center;\n  gap: 0.5rem;\n\n  legend {\n    font-weight: 600;\n    margin-inline: auto;\n  }\n\n  > div {\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n  }\n}\n\n::backdrop {\n  background-color: var(--bgc-0);\n  opacity: 1;\n}\n\n#main {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n  padding-top: 2rem;\n}\n\n#main.start-screen {\n  > h1 {\n    font-size: 3rem;\n  }\n\n  > #boards {\n    width: 100vw;\n    display: flex;\n    align-items: center;\n    justify-content: space-evenly;\n\n    > #start-button {\n      height: 3rem;\n      width: 8rem;\n      font-size: 1.5rem;\n    }\n  }\n\n  > #footer {\n    display: flex;\n    gap: 2rem;\n    align-items: center;\n\n    > #settings {\n      display: flex;\n      justify-content: center;\n      font-size: 1.25rem;\n    }\n\n    > button {\n      padding: 1rem;\n    }\n  }\n}\n\n#main.ship-select {\n  button {\n    padding: 1rem;\n  }\n}\n\n#main.shot-select {\n  #boards {\n    display: flex;\n    gap: 2rem;\n    align-items: center;\n\n    #control-container {\n      border: 1px solid black;\n      padding: 1rem;\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n  }\n\n  .box {\n    display: flex;\n    gap: 1rem;\n    padding: 1rem;\n    border: 1px solid black;\n\n    > .box {\n      flex-direction: column;\n    }\n  }\n}\n\n.board {\n  display: grid;\n  grid-template-columns: repeat(10, 50px);\n}\n\n.square {\n  height: 50px;\n  background-color: var(--square-normal);\n  border: 1px solid var(--borderc-0);\n  position: relative;\n\n  &.shot {\n    background-color: var(--square-miss);\n  }\n\n  &.hit {\n    background-color: var(--square-hit);\n  }\n\n  &.selected {\n    background-color: var(--square-select);\n  }\n}\n\n.ship-container {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 1rem;\n  gap: 2rem;\n  border: 1px solid var(--borderc-0);\n  align-items: center;\n  max-width: 500px;\n}\n\n.ship {\n  display: flex;\n  z-index: 1;\n\n  > .square {\n    width: 50px;\n    height: 50px;\n    background-color: var(--ship-square);\n    border: none;\n\n    &.hit {\n      background-color: var(--ship-hit);\n    }\n  }\n\n  &.placed {\n    position: absolute;\n    left: -1px;\n    top: -1px;\n  }\n\n  &.rotated {\n    flex-direction: column;\n  }\n\n  &.selected {\n    transform: scale(1.1);\n  }\n}\n'],sourceRoot:""}]);const a=s},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,r,o,i){"string"==typeof n&&(n=[[null,n,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<n.length;l++){var A=[].concat(n[l]);r&&s[A[0]]||(void 0!==i&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=i),t&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=t):A[2]=t),o&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=o):A[4]="".concat(o)),e.push(A))}},e}},354:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */");return[e].concat([i]).join("\n")}return[e].join("\n")}},72:n=>{var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var i={},s=[],a=0;a<n.length;a++){var c=n[a],l=r.base?c[0]+r.base:c[0],A=i[l]||0,u="".concat(l," ").concat(A);i[l]=A+1;var d=t(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var h=o(p,r);r.byIndex=a,e.splice(a,0,{identifier:u,updater:h,references:1})}s.push(u)}return s}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var i=r(n=n||[],o=o||{});return function(n){n=n||[];for(var s=0;s<i.length;s++){var a=t(i[s]);e[a].references--}for(var c=r(n,o),l=0;l<i.length;l++){var A=t(i[l]);0===e[A].references&&(e[A].updater(),e.splice(A,1))}i=c}}},659:n=>{var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return n[r](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var r=t(72),o=t.n(r),i=t(825),s=t.n(i),a=t(659),c=t.n(a),l=t(56),A=t.n(l),u=t(540),d=t.n(u),p=t(113),h=t.n(p),f=t(208),m={};m.styleTagTransform=h(),m.setAttributes=A(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=d(),o()(f.A,m),f.A&&f.A.locals&&f.A.locals;const g=function(){let n=10,e=5,t="Cluster",r="CPU";return{get sides(){return n},get ships(){return e},get shotType(){return t},get opp(){return r},changeSettings:function(o){e=o.ships||e,n=o.sides||n,t=o.shot,r=o.opp}}}();class C{squareKeys=[];hits=0;orient="horizontal";constructor(n){this.length=n,this.shipRef=this.#n()}switchOrient(){this.orient="horizontal"===this.orient?"vertical":"horizontal"}isPlaced(){return this.shipRef.classList.contains("placed")}unplace(){this.squareKeys=[]}receiveHit(n){const e=this.squareKeys.indexOf(n);return this.shipRef.querySelector(`.num-${e}`).classList.add("hit"),++this.hits===this.length}#n(){const n=S("div",[["class","ship"],["id",`ship-${this.length}`]]);for(let e=0;e<this.length;e++)n.appendChild(C.#e(e));return n}static#e(n){return S("div",[["class",`square num-${n}`]])}}class E{boardRef=S("div",[["class","board"]]);shotSquares=new Set;shipArr=E.#t();constructor(n=g.sides){this.#r(n)}#o([n,e],t,r){const o=new Set;if("horizontal"===r){const r=n+t;if(r>g.sides)return!1;for(;n<r;n++)o.add(E.getKey([n,e]))}else{const r=e+t;if(r>g.sides)return!1;for(;e<r;e++)o.add(E.getKey([n,e]))}return o}#i(n,e){const t=this.#o(e,n.length,n.orient);if(!t.size)return[];for(const n of this.shipArr)if(n.squareKeys.some((n=>t.has(n))))return[];return Array.from(t)}placeShip(n,e){return n.squareKeys=this.#i(n,e),0!==n.squareKeys.length}checkShot(n){return!this.shotSquares.has(E.getKey(n))}receiveShot([n,e]){const t=E.getKey([n,e]);this.shotSquares.add(t);for(const n of this.shipArr)if(n.squareKeys.some((n=>n===t)))return n}getShipsByPlaced(n){const e=[];return this.shipArr.forEach((t=>{0!==t.squareKeys.length===n&&e.push(t)})),e}getSquareRef(n){return this.boardRef.querySelector(`#${E.getId(n)}`)}static getId([n,e]){return`square-${n}-${e}`}static getCoordsFromId(n){return n.slice(7).split("-").map((n=>+n))}static getCoordsFromKey(n){return n.split("-").map((n=>+n))}static getKey([n,e]){return`${n}-${e}`}#r(n){for(let e=0;e<n;e++)for(let t=0;t<n;t++){const n=S("div",[["class","square"],["id",E.getId([t,e])]]);this.boardRef.appendChild(n)}}static#t(n=g.ships){const e=[];for(let t=1;t<=n;t++)e.push(new C(t));return e}}let b=[],y=[];const B=document.querySelector("#main"),v=document.querySelector("#switch-screen");function S(n,e,t=""){const r=document.createElement(n);return e.forEach((([n,e])=>{r.setAttribute(n,e)})),r.innerText=t,r}function x(n){B.appendChild(n),b.push(n)}function q(){b.forEach((n=>n.remove())),b=[]}function k(n,e,t,r=!1){n.addEventListener(e,t,{once:r}),r||y.push([n,e,t])}function w(){y.forEach((([n,e,t])=>{n.removeEventListener(e,t)})),y=[]}function I(n,e,...t){v.showModal(),v.querySelector("#player-turn").innerText=`Player ${e+1}'s Turn`,k(v.querySelector("button"),"click",(()=>{v.close(),n(...t)}),!0)}function P(n,e,t="before"){const r=e.parentNode;return"before"===t?r.insertBefore(n,e):e.nextElementSibling!==r.lastElementChild?r.insertBefore(n,e.nextElementSibling):r.appendChild(n)}function T(n){n.shipArr.forEach((n=>n.shipRef.classList.add("hidden")))}function M(n){n.shipArr.forEach((n=>n.shipRef.classList.remove("hidden")))}function R(n,e){n.shipRef.classList.add("placed"),"vertical"===n.orient&&n.shipRef.classList.add("rotated");const t=E.getCoordsFromKey(n.squareKeys[0]);e.getSquareRef(t).appendChild(n.shipRef)}function K(n=g.sides){return[Math.floor(Math.random()*n),Math.floor(Math.random()*n)]}function L(n,e="both"){const t=[],[r,o]=E.getCoordsFromKey(n);if("horizontal"===e||"both"===e)for(const n of[r+1,r-1])n>=0&&n<g.sides&&t.push(E.getKey([n,o]));if("vertical"===e||"both"===e)for(const n of[o+1,o-1])n>=0&&n<g.sides&&t.push(E.getKey([r,n]));return t}class z{board=new E;constructor(n){this.playerNum=n,this.aliveShips=g.ships}}const F=function(){const n=[new z(0),new z(1)];let e=0;function t(){return 0===e?1:0}return{switchTurn:function(){e=t()},get currPlayer(){return n[e]},get oppPlayer(){return n[t()]},get currTurn(){return e},isCPU:function(){return"CPU"===g.opp&&1===e}}}();let $,U,j,Y;function O(){document.querySelector("#main").classList.toggle("shot-select"),x(S("h1",[],"Battle Phase")),x(function(){const n=S("div",[["id","boards"]]);return n.appendChild(F.currPlayer.board.boardRef),n.appendChild(function(){const n=S("div",[["id","control-container"]]);return n.appendChild(S("div",[["id","control-msg"]])),n.appendChild(S("button",[["id","control-button"]],"Confirm")),n}()),n.appendChild(F.oppPlayer.board.boardRef),n}()),x(function(){const n=S("div",[["id","stats"],["class","box"]]);return n.appendChild(D(0)),n.appendChild(D(1)),n}()),T(F.currPlayer.board),T(F.oppPlayer.board),W()}function W(){$=new Set,U="Single"===g.shotType?1:F.currPlayer.aliveShips,M(F.currPlayer.board),k(F.oppPlayer.board.boardRef,"click",H),k(document.querySelector("#control-button"),"click",N),V(`Select ${U} Shots`),_(!1)}function H(n){if(!n.target.classList.contains("square"))return;const e=E.getKey(E.getCoordsFromId(n.target.id));F.oppPlayer.board.shotSquares.has(e)||($.has(e)?Q(n.target):U>$.size?G(n.target):1===U&&(Q($.keys().next().value),G(n.target)),_(U===$.size))}function N(){const n=function(n){let e=0;return $.forEach((t=>{const r=E.getCoordsFromKey(t),o=n.receiveShot(r),i=n.getSquareRef(r);i.classList.remove("selected"),o?(e++,i.classList.add("hit"),o.receiveHit(t)&&F.oppPlayer.aliveShips--):i.classList.add("shot")})),e}(F.oppPlayer.board);V(`Hits: ${n}\nMisses: ${$.size-n}`),function(n){const e=document.querySelector(`#stats-player${F.currTurn}`);let t=0,r=n.shotSquares.size;n.shipArr.forEach((e=>{e.squareKeys.forEach((e=>{n.shotSquares.has(e)&&t++}))})),e.innerText=J(t,r)}(F.oppPlayer.board),w(),k(document.querySelector("#control-button"),"click",Z,!0)}function Z(){if(!F.oppPlayer.aliveShips)return V(`Player ${F.currTurn} Wins!`),M(F.currPlayer.board),void M(F.oppPlayer.board);F.switchTurn(),F.isCPU()?I(X,F.currTurn):(T(F.currPlayer.board),I(W,F.currTurn))}function X(){U="Single"===g.shotType?1:F.currPlayer.aliveShips,$=function(n,e){const[t,r]=function(n){const e=new Map;n.shipArr.forEach((t=>{const r=[];t.squareKeys.forEach((e=>{n.shotSquares.has(e)&&r.push(e)})),r.length&&e.set(t,r)}));const t=new Map([["vertical",[]],["horizontal",[]]]),r=new Set;return e.forEach(((n,e)=>{1===n.length?r.add(n[0]):t.get(e.orient).push(...n)})),[t,r]}(n),o=new Set;for(t.forEach(((e,t)=>{e.forEach((e=>{L(e,t).forEach((e=>{n.shotSquares.has(e)||o.add(e)}))}))})),r.forEach((e=>{L(e).forEach((e=>{n.shotSquares.has(e)||o.add(e)}))}));o.size<e;){const e=E.getKey(K());n.shotSquares.has(e)||o.add(e)}return function(n,e){const t=n.keys();for(;n.size>e;)n.delete(t.next().value);return n}(o,e)}(F.oppPlayer.board,U),N()}function D(n){const e=S("div",[["class","box"]]);return e.appendChild(S("h4",[],`Player ${n}:`)),e.appendChild(S("div",[["id",`stats-player${n}`]],J(0,0))),e}function J(n,e){const t=0===e?0:Math.round(n/e*100);return`Hits: ${n} / ${g.ships*(g.ships+1)/2}\nShots: ${e}\nAcc: ${t}%`}function V(n){document.querySelector("#control-msg").innerText=n}function _(n){document.querySelector("#control-button").disabled=!n}function G(n){const e=E.getKey(E.getCoordsFromId(n.id));$.add(e),n.classList.add("selected")}function Q(n){const e=E.getKey(E.getCoordsFromId(n.id));$.delete(e),n.classList.remove("selected")}function nn(){const n=F.currPlayer.board;document.querySelector("#main").classList.add("ship-select"),x(S("h1",[],"Place Your Ships")),x(n.boardRef),k(n.boardRef,"click",tn),x(function(){const n=S("div",[["class","ship-container"]]);return k(n,"click",rn),n.appendChild(function(){const n=S("button",[["id","rotate-button"]],"Rotate Ship");return k(n,"click",on),n}()),n.appendChild(function(){const n=S("button",[["id","confirm-button"],["disabled","true"]],"Confirm Placement");return k(n,"click",sn,!0),n}()),n}()),function(n,e=en){const t=document.querySelector(".ship-container");n.forEach((n=>{k(n.shipRef,"click",e),P(n.shipRef,t.lastElementChild)}))}(n.shipArr)}function en(n){if(n.stopPropagation(),n.currentTarget.classList.contains("ship")){if(an(ln(j))&&(Y=null),n.currentTarget===j)j=null;else{j=n.currentTarget;const e=ln(j);j.classList.add("selected"),Y=function(n){return n.isPlaced()?n.squareKeys:null}(e),e.unplace()}cn(0===F.currPlayer.board.getShipsByPlaced(!1).length)}}function tn(n){const e=F.currPlayer.board;if(n.target===e.boardRef)return;if(!j)return;const t=ln(j),r=E.getCoordsFromId(n.target.id);e.placeShip(t,r)&&(R(t,e),Y=null,cn(!e.getShipsByPlaced(!1).length)),an(t)&&(Y=null),j=null}function rn(){if(!j)return;const n=ln(j);n.isPlaced()&&(function(n){const e=document.querySelector(".ship-container .ship");e&&e.classList.contains("rotated")!==n.shipRef.classList.contains("rotated")&&An(n)}(n),n.unplace(),function(n){P(n,document.querySelector(".ship-container").lastElementChild),n.classList.remove("placed")}(j),Y=null,an(n),j=null,cn(!1))}function on(n){n.stopPropagation(),F.currPlayer.board.getShipsByPlaced(!1).forEach((n=>An(n)))}function sn(n){if(n.stopPropagation(),w(),q(),j=null,Y=null,F.switchTurn(),F.isCPU()){const n=F.currPlayer.board;(function(n){n.shipArr.forEach((e=>function(n,e){let t;do{t=K(),Math.random()<.5&&e.switchOrient()}while(!n.placeShip(e,t))}(n,e)))})(n),n.shipArr.forEach((e=>R(e,n))),F.switchTurn()}else if(1===F.currTurn)return I(nn,1);document.querySelector("#main").classList.remove("ship-select"),I(O,0)}function an(n){return!!n&&(n.shipRef.classList.remove("selected"),!!Y&&(n.squareKeys=Y,!0))}function cn(n){document.querySelector("#confirm-button").disabled=!n}function ln(n){for(const e of F.currPlayer.board.shipArr)if(e.shipRef===n)return e}function An(n){n.shipRef.classList.toggle("rotated"),n.switchOrient()}function un(){w(),q(),document.querySelector("#main").classList.remove("start-screen"),I(nn,0)}function dn(){const n=document.querySelector("#rules-modal");n.showModal(),k(n.querySelector("button"),"click",pn,!0)}function pn(){document.querySelector("#rules-modal").close()}function hn(){const n=document.querySelector("#settings-modal");n.showModal(),k(n.querySelector("button"),"click",fn,!0)}function fn(n){const e=document.querySelector("#settings-modal"),t=e.querySelector("#settings-modal form").elements;g.changeSettings({shot:t.cluster.checked?"Cluster":"Single",opp:t.computer.checked?"CPU":"Player"}),mn(),n.preventDefault(),e.close()}function mn(){const n=document.querySelector("#settings"),e=["Sides: "+g.sides,"Ships: "+g.ships,"Shots: "+g.shotType,"Opp: "+g.opp].join("\n");n.innerText=e}document.querySelector("#main").classList.add("start-screen"),x(S("h1",[],"Play BattleShip!")),x(function(){const n=S("div",[["id","boards"]]);return n.appendChild(new E(10,5).boardRef),n.appendChild(function(n){const e=S("button",[["id","start-button"]],"Start!");return k(e,"click",n,!0),e}(un)),n.appendChild(new E(10,5).boardRef),n}()),x(function(){const n=S("div",[["id","footer"]]);return n.appendChild(function(n){const e=S("button",[["id","rules-button"]],"How To Play");return k(e,"click",n),e}(dn)),n.appendChild(S("div",[["id","settings"]])),n.appendChild(function(n){const e=S("button",[["id","settings-button"]],"Change Settings");return k(e,"click",n),e}(hn)),n}()),mn()})();
//# sourceMappingURL=main.js.map